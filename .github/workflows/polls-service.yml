name: CI/CD | Backend | polls-service

on:
    push:
        branches: ["main", "staging"]
        paths: ["backend/polls-service/**", ".github/workflows/polls-service.yml"]
    pull_request:
        branches: ["main", "staging"]
        paths: ["backend/polls-service/**", ".github/workflows/polls-service.yml"]
   
jobs: 
    build_and_test:
        name: Build and Test
        runs-on: ubuntu-latest

        steps:
            - name: Checkout code
              uses: actions/checkout@v5

            - name: Set up Node.js
              uses: actions/setup-node@v6
              with:
                node-version: '24'

            - name: Install dependencies
              run: npm ci
            
            - name: Lint code
              run: npm run lint

            - name: Run tests
              run: npm test
                